{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-07T13:01:23.694Z",
  "summary": "Diff implements multi-sheet karigar mapping support with deterministic sheet read order (priority \"1\"→\"3\"→\"2\" then others alphabetically) and updates mapping lookup to use all parsed sheets with shared design-code normalization for lookup keys. However, the requested UI diagnostics showing sample normalized keys when there are 0 matches are not evidenced in the provided diff summary. Diff also adds unrequested PDF mapping parsing and related upload handling.",
  "missing_requirements": [
    {
      "id": "REQ-3",
      "requirement": "When there are 0 matches but a mapping is loaded, the UI shows debug samples of normalized order keys and normalized mapping keys (no crash).",
      "reason": "The diff summary shows normalization and decoding logic updates, but does not include any evidenced UI change that displays sample normalized keys in the '0 matches' scenario.",
      "evidence": [
        "frontend/src/features/order-list/useKarigarMappingLookup.ts",
        "frontend/src/features/karigar-mapping/useKarigarMappingSummary.ts",
        "frontend/src/features/daily-orders/excel/parseKarigarMapping.ts",
        "frontend/src/features/karigar-mapping/KarigarMappingTab.tsx"
      ]
    }
  ],
  "hallucinated_features": [
    {
      "description": "Support for parsing karigar mapping from PDF files (parsePdfMapping) and accepting PDFs in mapping upload flow.",
      "reason": "BuildRequest is specifically about Excel workbook sheet scanning and consistent design-code normalization; PDF mapping parsing is not requested and the non-goals explicitly say OCR/screenshot-to-Excel parsing is unsupported (PDF support is a new capability beyond the request).",
      "evidence": [
        "frontend/src/features/daily-orders/excel/parseKarigarMapping.ts",
        "frontend/src/features/karigar-mapping/KarigarMappingTab.tsx"
      ]
    },
    {
      "description": "Special handling to detect and avoid treating numeric ratios as generic names (looksLikeNumericRatio).",
      "reason": "Not requested by the BuildRequest requirements/acceptance criteria; it changes parsing heuristics beyond 'case-insensitive headers with aliases' and optional NAME handling.",
      "evidence": [
        "frontend/src/features/daily-orders/excel/parseKarigarMapping.ts"
      ]
    }
  ],
  "confidence": 0.67,
  "changed_files": [
    "frontend-file-summaries.txt",
    "frontend/src/features/daily-orders/excel/parseKarigarMapping.ts",
    "frontend/src/features/karigar-mapping/KarigarMappingTab.tsx",
    "frontend/src/features/karigar-mapping/getMappingSheetReadOrder.ts",
    "frontend/src/features/karigar-mapping/useKarigarMappingSummary.ts",
    "frontend/src/features/order-list/useKarigarMappingLookup.ts",
    "project_state.json"
  ]
}