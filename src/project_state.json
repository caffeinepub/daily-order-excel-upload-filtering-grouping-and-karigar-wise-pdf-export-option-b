{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 13,
  "summary": "Order management app (Option B) where the user uploads a cumulative OrderList (treated as today/selected date’s orders) and uses a standard (not daily) karigar mapping document (Excel or PDF) to auto-enrich orders with Generic Name + Karigar Name by Design code, then view orders factory-wise via swipeable factory screens and karigar-wise grouping with export actions, within an app layout titled “Shree I Jewellery Order Management System” (default opens to Order List).",
  "architectural_notes": [
    "Portal automation/scraping is out of scope; orders will be provided via manual Excel upload (Option B).",
    "Do not store or hardcode portal credentials in the app; treat any login details as secrets and exclude from logs/storage.",
    "Input will include two Excel uploads: a cumulative OrderList (treated as the selected day’s dataset) and a separate multi-sheet workbook used as a Design→Karigar mapping for grouping.",
    "App should open without requiring user login/authentication (no auth gate on launch).",
    "Add a landing page/title screen and a 3-tab app structure: Order List (factory-wise), Daily Order Upload, and Karigar Mapping.",
    "Karigar mapping workbook is a standard/persistent dataset updated only when required via manual upload (not a daily upload).",
    "The mapping workbook’s “Name” column represents a generic product name associated with the product/design code and must be handled accordingly when grouping/displaying.",
    "Karigar mapping source must support either Excel or PDF; requiring three sheets named 1/2/3 is optional and must not be assumed.",
    "Order display should be enriched from mapping by adding derived columns (Generic Name, Karigar Name) matched via Design code."
  ],
  "known_issues": [
    "Excel upload/list is not reading the uploaded Excel file and the app fails/crashes during upload.",
    "Karigar names are being mismatched due to incorrect parsing/usage of the karigar mapping workbook (sheets/columns), resulting in improper karigar-wise filtering/grouping.",
    "Generic Name mapping/enrichment appears incorrect for some design codes (e.g., showing values like \"3+1\", \"4S IPL\" as generic design names), indicating mapping parsing/matching issues."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-implement-a-daily-orders-excel-upload-flow-where-a-user-can-select-a-date-default-today-and-upload-the-portal-exported-excel-file-for-that-date",
      "title": "Implement a daily orders Excel upload flow where a user can select a date (default: today) and upload the portal-exported Excel file for that date.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-parse-the-uploaded-excel-file-and-extract-only-these-columns-for-each-order-row-order-no-design-weight-size-quantity-remarks",
      "title": "Parse the uploaded Excel file and extract only these columns for each order row: Order No, Design, Weight, Size, Quantity, Remarks.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-provide-interactive-filtering-and-sorting-of-the-extracted-daily-orders-including-sorting-by-design-and-searching-filtering-across-the-extracted-fields",
      "title": "Provide interactive filtering and sorting of the extracted daily orders, including sorting by Design and searching/filtering across the extracted fields.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-support-grouping-orders-karigar-wise-and-factory-wise-if-needed-to-produce-separate-per-group-views-and-exports-since-the-extracted-excel-fields-do-not-include-karigar-factory-provide-an-in-app-way-to-assign-each-order-or-each-design-to-a-karigar-and-optional-factory-for-the-current-day-and-reuse-those-assignments-for-consistent-grouping",
      "title": "Support grouping orders karigar-wise (and factory-wise if needed) to produce separate per-group views and exports. Since the extracted Excel fields do not include karigar/factory, provide an in-app way to assign each order (or each Design) to a karigar and optional factory for the current day, and reuse those assignments for consistent grouping.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-generate-downloadable-pdf-exports-for-each-karigar-group-for-the-selected-date-containing-that-group-s-orders-with-the-extracted-fields-order-no-design-weight-size-quantity-remarks-and-a-clear-header-including-the-date-and-group-name",
      "title": "Generate downloadable PDF exports for each karigar group for the selected date, containing that group’s orders with the extracted fields (Order No, Design, Weight, Size, Quantity, Remarks) and a clear header including the date and group name.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-coherent-distinct-visual-theme-for-the-app-colors-typography-layout-and-apply-it-consistently-across-the-upload-table-grouping-and-export-screens",
      "title": "Create a coherent, distinct visual theme for the app (colors, typography, layout) and apply it consistently across the upload, table, grouping, and export screens.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-daily-orders-page-to-support-uploading-two-separate-files-for-the-selected-date-default-today-1-an-orderlist-workbook-that-contains-cumulative-orders-and-must-be-displayed-stored-as-the-selected-date-s-orders-and-2-a-karigar-mapping-workbook-mbar0502-copy-used-to-auto-group-filter-orders-karigar-wise",
      "title": "Update the Daily Orders page to support uploading two separate files for the selected date (default: today): (1) an OrderList workbook that contains cumulative orders and must be displayed/stored as the selected date’s orders, and (2) a karigar mapping workbook (\"mbar0502 copy\") used to auto-group/filter orders karigar-wise.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-add-support-for-parsing-the-provided-orderlist-excel-workbook-format-e-g-orderlist17-from-xlsx-xls-and-still-accept-csv-and-extract-the-same-required-order-fields-per-row-order-no-design-weight-size-quantity-remarks",
      "title": "Add support for parsing the provided OrderList Excel workbook format (e.g., OrderList17) from .xlsx/.xls (and still accept .csv) and extract the same required order fields per row: Order No, Design, Weight, Size, Quantity, Remarks.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-parsing-of-the-karigar-mapping-workbook-e-g-mbar0502-copy-that-contains-three-sheets-named-1-2-and-3-combine-these-sheets-into-a-single-design-karigar-mapping-and-use-it-to-automatically-assign-group-orders-karigar-wise-for-the-selected-date-based-on-each-order-s-design-value",
      "title": "Implement parsing of the karigar mapping workbook (e.g., \"mbar0502 copy\") that contains three sheets named \"1\", \"2\", and \"3\"; combine these sheets into a single Design → Karigar mapping and use it to automatically assign/group orders karigar-wise for the selected date based on each order’s Design value.",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-safe-apply-mapping-workflow-and-visibility-into-mapping-results-including-how-many-orders-were-assigned-per-karigar-and-which-order-designs-could-not-be-matched-ensure-manual-assignment-remains-available-and-can-override-auto-assigned-results-when-needed",
      "title": "Add a safe 'Apply mapping' workflow and visibility into mapping results, including how many orders were assigned per karigar and which order designs could not be matched; ensure manual assignment remains available and can override auto-assigned results when needed.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-orderlist-upload-flow-so-uploading-an-excel-file-xlsx-xls-does-not-crash-or-abort-the-upload-and-the-parsed-orders-are-shown-in-the-ui-after-upload",
      "title": "Fix the OrderList upload flow so uploading an Excel file (.xlsx/.xls) does not crash or abort the upload, and the parsed orders are shown in the UI after upload.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-make-file-type-detection-in-the-orderlist-parser-robust-to-uppercase-extensions-and-common-filename-variations-by-using-case-insensitive-checks-e-g-xlsx-xls-and-or-mime-type-fallbacks",
      "title": "Make file-type detection in the OrderList parser robust to uppercase extensions and common filename variations by using case-insensitive checks (e.g., .XLSX/.XLS) and/or MIME-type fallbacks.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-frontend-handles-backend-upload-failures-gracefully-if-storing-parsed-orders-in-the-backend-fails-keep-the-parsed-orders-visible-in-the-ui-and-show-a-clear-english-error-indicating-saving-failed-separate-from-parsing-errors",
      "title": "Ensure the frontend handles backend upload failures gracefully: if storing parsed orders in the backend fails, keep the parsed orders visible in the UI and show a clear English error indicating saving failed (separate from parsing errors).",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-the-login-requirement-on-app-open-so-the-daily-orders-ui-is-accessible-immediately-without-internet-identity-authentication",
      "title": "Remove the login requirement on app open so the Daily Orders UI is accessible immediately without Internet Identity authentication.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-change-the-current-karigars-grouping-ui-so-it-does-not-display-any-design-list-instead-show-only-the-different-factories-as-the-primary-grouping-navigation",
      "title": "Change the current “Karigars” grouping UI so it does not display any design list; instead, show only the different factories as the primary grouping/navigation.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-make-the-factory-views-premade-no-manual-karigar-selection-required-when-a-factory-is-selected-display-all-orders-grouped-karigar-wise-automatically-within-that-factory",
      "title": "Make the factory views “premade” (no manual karigar selection required): when a factory is selected, display all orders grouped karigar-wise automatically within that factory.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-add-swipe-based-navigation-to-move-between-factory-order-lists-and-provide-a-per-factory-download-export-action-so-the-user-can-swipe-to-a-factory-and-download-that-factory-s-order-list",
      "title": "Add swipe-based navigation to move between factory order lists, and provide a per-factory download/export action so the user can swipe to a factory and download that factory’s order list.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-karigar-mapping-excel-parsing-so-karigar-names-are-assigned-correctly-by-reading-the-correct-columns-and-prioritizing-sheets-1-and-3-and-treating-the-name-column-as-the-generic-product-name-for-the-product-design-code",
      "title": "Fix karigar mapping Excel parsing so karigar names are assigned correctly by reading the correct columns and prioritizing sheets \"1\" and \"3\" (and treating the \"Name\" column as the generic product name for the product/design code).",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-refactor-the-app-entry-ui-to-show-a-landing-header-titled-shree-i-jewellery-order-management-system-and-provide-a-3-tab-navigation-1-order-list-factory-wise-view-2-daily-order-upload-and-3-karigar-mapping",
      "title": "Refactor the app entry UI to show a landing header titled \"Shree I Jewellery Order Management System\" and provide a 3-tab navigation: (1) \"Order List\" (factory-wise view), (2) \"Daily Order Upload\", and (3) \"Karigar Mapping\".",
      "reqIds": [
        "REQ-22"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-order-list-tab-to-display-orders-factory-wise-one-factory-visible-at-a-time-with-swipe-based-navigation-between-factories-and-within-each-factory-group-orders-karigar-wise-with-a-per-karigar-download-action-displayed-above-each-karigar-group",
      "title": "Update the \"Order List\" tab to display orders factory-wise (one factory visible at a time) with swipe-based navigation between factories, and within each factory group orders karigar-wise with a per-karigar download action displayed above each karigar group.",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-when-displaying-orders-in-the-factory-karigar-views-sort-orders-so-that-items-with-the-same-design-product-code-are-grouped-together-and-display-the-generic-product-name-from-the-mapping-workbook-name-column-alongside-the-design-product-code-in-the-ui",
      "title": "When displaying orders in the factory/karigar views, sort orders so that items with the same design/product code are grouped together, and display the generic product name (from the mapping workbook \"Name\" column) alongside the design/product code in the UI.",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-karigar-mapping-tab-to-allow-uploading-an-updated-mapping-workbook-at-any-time-independent-of-daily-order-uploads-show-an-english-confirmation-error-state-and-make-the-newly-uploaded-mapping-immediately-available-to-the-order-list-and-mapping-apply-workflows",
      "title": "Update the \"Karigar Mapping\" tab to allow uploading an updated mapping workbook at any time (independent of daily order uploads), show an English confirmation/error state, and make the newly uploaded mapping immediately available to the Order List and mapping-apply workflows.",
      "reqIds": [
        "REQ-25"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Excel upload flow for daily orders (manual upload)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Parse uploaded Excel and extract only: Order No, Design, Weight, Size, Quantity, Remarks",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Filter/sort orders by design and group/filter karigar-wise (and factory-wise if applicable)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Generate and export/share karigar-wise PDFs from filtered daily orders",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Store daily uploaded order data and the derived grouping assignments in the backend so the user can reopen past dates and re-export PDFs without re-uploading the Excel file.",
      "reqIds": [
        "REQ-6"
      ],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Support uploading a second Excel workbook (multi-sheet) that maps Design -> Karigar (and use it to auto-assign/group orders karigar-wise)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Treat the uploaded cumulative OrderList Excel as the selected date’s (default: today) orders (i.e., show all rows as today’s orders)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-17",
      "summary": "Karigar screen should not display the Design list; show only different Factories as the primary grouping/navigation",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Pre-made karigar-wise display of all orders (no manual choosing); user can swipe between factory order lists and download each factory’s list",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Remove login requirement when the app is opened (no authentication gate on launch)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-21",
      "summary": "Update backend authorization so anonymous users can read/write daily orders and karigar/factory assignments without trapping as unauthorized.",
      "reqIds": [
        "REQ-16"
      ],
      "status": "pending"
    },
    {
      "id": "AR-22",
      "summary": "Add an app landing page on open showing title “Shree I Jewellery Order Management System” and provide a 3-tab navigation: (1) Order List (factory-wise), (2) Daily Order Upload, (3) Karigar Mapping management/upload.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-23",
      "summary": "Correct karigar mapping parsing: specifically use sheets 1 & 3 appropriately and treat the “Name” column as the generic product name tied to the product/design code; ensure orders are matched and karigar names assigned correctly.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-24",
      "summary": "In karigar-wise filtered views, add a download option above each karigar tab to export/download that karigar’s orders.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-25",
      "summary": "Treat the karigar mapping workbook as a standard, persistent dataset (not changing daily); allow updating it only when required via manual upload in the Karigar Mapping tab.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-27",
      "summary": "Persist the karigar mapping workbook as a standard (non-daily) dataset in the backend, with APIs to save a full mapping replacement on upload and to fetch the currently saved mapping for use across all dates.",
      "reqIds": [
        "REQ-21"
      ],
      "status": "pending"
    },
    {
      "id": "AR-28",
      "summary": "Allow karigar mapping upload as either Excel or PDF; sheets 1/2/3 structure should be optional (not required).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-29",
      "summary": "Parse mapping PDF containing Design Code, Generic Name, Karigar Name; match by Design code and enrich all orders by adding columns for Generic Name and Karigar Name.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-30",
      "summary": "In factory-wise views, filter/group orders using the mapped Karigar Name (after enrichment) and show factory sections accordingly.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-31",
      "summary": "Add a factory-wise 'Select all orders and export' option (not only individual selection).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-32",
      "summary": "Revamp navigation: move top tabs into a left-side menu/drawer opened via a top icon; default app landing should open directly to the Order List page.",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Daily order Excel upload, filtering/grouping, and karigar-wise PDF export (Option B)",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}